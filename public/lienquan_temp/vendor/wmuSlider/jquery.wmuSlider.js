(function(a){a.fn.wmuSlider=function(b){var c={animation:"fade",animationDuration:600,slideshow:true,slideshowSpeed:7000,slideToStart:0,navigationControl:true,paginationControl:true,previousText:"Previous",nextText:"Next",touch:false,slide:"article",items:1};var b=a.extend(c,b);return this.each(function(){var n=a(this);var m=b.slideToStart;var f=n.find(".wmuSliderWrapper");var g=n.find(b.slide);var d=g.length;var j;var k;var e;var i=function(r,s,t){if(e){return false}e=true;m=r;var q=a(g[r]);n.animate({height:q.innerHeight()});if(b.animation=="fade"){g.css({position:"absolute",opacity:0});q.css("position","relative");q.animate({opacity:1},b.animationDuration,function(){e=false})}else{if(b.animation=="slide"){if(!s){f.animate({marginLeft:-n.width()/b.items*r},b.animationDuration,function(){e=false})}else{if(r==0){f.animate({marginLeft:-n.width()/b.items*d},b.animationDuration,function(){f.css("marginLeft",0);e=false})}else{if(!t){f.css("marginLeft",-n.width()/b.items*d)}f.animate({marginLeft:-n.width()/b.items*r},b.animationDuration,function(){e=false})}}}}if(k){k.find("a").each(function(u){if(u==r){a(this).addClass("wmuActive")}else{a(this).removeClass("wmuActive")}})}n.trigger("slideLoaded",r)};if(b.paginationControl){k=a('<ul class="wmuSliderPagination"></ul>');a.each(g,function(q){k.append('<li><a href="#">'+q+"</a></li>");k.find("a:eq("+q+")").click(function(r){r.preventDefault();clearTimeout(j);i(q)})});n.append(k)}if(b.slideshow){var p=function(){if(m+1<d){i(m+1)}else{i(0,true)}j=setTimeout(p,b.slideshowSpeed)};j=setTimeout(p,b.slideshowSpeed)}var h=function(){var q=a(g[m]);n.animate({height:q.innerHeight()});if(b.animation=="slide"){g.css({width:n.width()/b.items});f.css({marginLeft:-n.width()/b.items*m,width:n.width()*g.length})}};var l=function(r,q,s,t){clearTimeout(j);if(q=="move"&&(s=="left"||s=="right")){if(s=="right"){if(m==0){f.css("marginLeft",(-d*n.width()/b.items)+t)}else{f.css("marginLeft",(-m*n.width()/b.items)+t)}}else{if(s=="left"){f.css("marginLeft",(-m*n.width()/b.items)-t)}}}else{if(q=="cancel"){if(s=="right"&&m==0){f.animate({marginLeft:-d*n.width()/b.items},b.animationDuration)}else{f.animate({marginLeft:-m*n.width()/b.items},b.animationDuration)}}else{if(q=="end"){if(s=="right"){if(m==0){i(d-1,true,true)}else{i(m-1)}}else{if(s=="left"){if(m+1==d){i(0,true)}else{i(m+1)}}else{f.animate({marginLeft:-m*n.width()/b.items},b.animationDuration)}}}}}};if(b.touch&&b.animation=="slide"){if(!a.isFunction(a.fn.swipe)){a.ajax({url:"jquery.touchSwipe.min.js",async:false})}if(a.isFunction(a.fn.swipe)){n.swipe({triggerOnTouchEnd:false,swipeStatus:l,allowPageScroll:"vertical"})}}var o=function(){var q=a(g[m]);var r=q.find("img");r.load(function(){f.show();n.animate({height:q.innerHeight()})});if(b.animation=="fade"){g.css({position:"absolute",width:"100%",opacity:0});a(g[m]).css("position","relative")}else{if(b.animation=="slide"){if(b.items>d){b.items=d}g.css("float","left");g.each(function(u){var t=a(this);t.attr("data-index",u)});for(var s=0;s<b.items;s++){f.append(a(g[s]).clone())}g=n.find(b.slide)}}h();n.trigger("hasLoaded");i(m)};o();a(window).resize(h);n.bind("loadSlide",function(r,q){clearTimeout(j);i(q)})})}})(jQuery);